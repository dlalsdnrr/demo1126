<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>야구 라이브</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/voice_overlay.css') }}" />
  </head>
  <body>
    <div class="topbar">
      <div class="topbar-right">
        <button class="serial-btn" id="serial-btn" title="시리얼 포트">
          🔌
        </button>
        <button class="serial-btn" id="bldc-btn" title="BLDC 제어" style="margin-left:6px;">
          🚗
        </button>
        <button class="serial-btn" id="ble-btn" title="BLE 브릿지" style="margin-left:6px;">
          📡
        </button>
      </div>
    </div>
    <main class="container">
      {% block content %}{% endblock %}
    </main>

    <!-- 시리얼 패널 (단순 전송 전용) -->
    <div class="serial-panel" id="serial-panel">
      <div class="serial-panel-header">
        <div>시리얼 테스트 전송</div>
        <button id="serial-close">✕</button>
      </div>
      <div class="serial-panel-body">
        <div class="serial-send">
          <label class="field-motor">모터 ID 
            <select id="serial-motor-id">
              <option value="25">25 · 오른쪽 어깨1</option>
              <option value="50">50 · 오른쪽 어깨2</option>
              <option value="75">75 · 오른쪽 팔꿈치</option>
              <option value="100">100 · 왼쪽 어깨1</option>
              <option value="125">125 · 왼쪽 어깨2</option>
              <option value="150" selected>150 · 왼쪽 팔꿈치</option>
            </select>
          </label>
          <label class="field-position">위치 
            <input id="serial-position" type="number" value="0" />
          </label>
          <label class="field-speed">속도 
            <input id="serial-speed" type="number" value="0" />
          </label>
        </div>
        <div class="serial-buttons">
          <button id="serial-send">테스트 전송</button>
          <button id="serial-macros">매크로</button>
        </div>
      </div>
    </div>

    <!-- BLDC 패널 -->
    <div class="bldc-panel" id="bldc-panel">
      <div class="bldc-panel-header">
        <div>BLDC 제어</div>
        <button id="bldc-close">✕</button>
      </div>
      <div class="bldc-panel-body">
        <div class="bldc-grid">
          <button class="bldc-btn" data-cmd="front">⬆ 앞</button>
          <div class="bldc-spacer"></div>
          <button class="bldc-btn" data-cmd="right">➡ 우</button>
          <button class="bldc-btn" data-cmd="left">⬅ 좌</button>
          <div class="bldc-spacer"></div>
          <button class="bldc-btn" data-cmd="back">⬇ 뒤</button>
          <button class="bldc-stop" data-cmd="stop">■ 정지</button>
        </div>
      </div>
    </div>

    <!-- BLE 패널 -->
    <div class="ble-panel" id="ble-panel">
      <div class="ble-panel-header">
        <div>BLE 브릿지</div>
        <button id="ble-close">✕</button>
      </div>
      <div class="ble-panel-body">
        <div class="ble-status" id="ble-status">
          <div>모드: <span id="ble-mode">-</span></div>
          <div>실행: <span id="ble-running">-</span></div>
          <div>광고: <span id="ble-adv">-</span></div>
          <div>최근 수신: <span id="ble-last">-</span></div>
        </div>
        <div class="ble-actions">
          <button id="ble-start">시작</button>
          <button id="ble-stop">중지</button>
          <button id="ble-refresh">새로고침</button>
        </div>
        <div class="ble-send">
          <input id="ble-msg" type="text" placeholder="안드로이드→메시지 시뮬레이트" />
          <button id="ble-send">전송(모의)</button>
        </div>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/main.js') }}" defer></script>
    <script src="{{ url_for('static', filename='js/voice_overlay.js') }}" defer></script>
  </body>
</html>
